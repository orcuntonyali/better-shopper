<% @navbar_text = "Taking your order" %>
<%= render "shared/navbar" %>

<% if @processed_items && @processed_items.any? %>
  <div class="cards-container">
    <% @processed_items.each do |item| %>
      <div class="item-card">
        <img class='align-self-center mr-3' src="<%= item['image_url'] %>" alt="<%= item['name'] %> image" width="90">
        <a href="<%= item_path(id: item['id']) %>" class="no-decoration">
          <div class="item-card-text">
            <h5 class="mt-0 no-decoration"><%= item['name'].capitalize %></h5>
              <div>
                <p>From <%= item['store'] %></p>
                <p> â‚¬<%= item['price'] %></p>
              </div>
          </div>
        </a>
        <div class="d-flex justify-content-between quantity" data-controller="minus-plus">
          <div data-action="click->minus-plus#decrement" data-item-id="<%= item['id'] %>">-</div>
          <div id="quantity_<%= item['id'] %>" data-minus-plus-target="quantity"><%= item['quantity'] %></div>
          <div data-action="click->minus-plus#increment" data-item-id="<%= item['id'] %>">+</div>
        </div>
      </div>
    <% end %>
  </div>
<% elsif @not_found_message %>
  <div class="container">
    <h1>Items Not Found</h1>
    <p><%= @not_found_message %></p>
  </div>
<% else %>
  <div class="container">
    <h1>No Items in Cart</h1>
    <p>Please add items to your cart.</p>
  </div>
<% end %>

<div class="d-flex justify-content-between">
  <%= link_to '+ ADD ITEMS', new_cart_item_path, class: 'button violet' %>
  <button class="button violet">CHECKOUT</button>
</div>
