<!-- Show a spinner or message -->
<div id="processing">
  <p>Processing your order, please wait...</p>
  <!-- You can use a spinner GIF or CSS animation here -->
</div>

<!-- Include a script to poll for order completion -->
<script>
  // Polling function to check if the order is ready
  function pollOrderStatus() {
    fetch("/cart_items/order_status")
      .then(response => response.json())
      .then(data => {
        if (data.status === "success") {
          window.location.href = data.redirect_url;
        } else {
          console.log('Waiting for order to be processed...');
          setTimeout(pollOrderStatus, 3000);
        }
      })
      .catch(error => {
        console.error('Error polling order status:', error);
        setTimeout(pollOrderStatus, 3000);
      });
  }

  document.addEventListener('DOMContentLoaded', pollOrderStatus);
</script>
